// --- ANTI-DDOS LOGIC ---
document.addEventListener("DOMContentLoaded", () => {
    const consoleLog = document.getElementById('console-log');
    const ddosScreen = document.getElementById('ddos-screen');
    const mainSite = document.getElementById('main-site');
    const ddosText = document.getElementById('ddos-text');

    // –§–µ–π–∫–æ–≤—ã–µ –ª–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
    const logs = [
        "Connecting to c12.play2go.cloud...",
        "Checking handshake...",
        "Verifying samurai spirit...",
        "Loading assets: Sakura.png...",
        "Connection SECURE."
    ];

    let logIndex = 0;

    // –°–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –ª–æ–≥–æ–≤ –∫–∞–∂–¥—ã–µ 800–º—Å
    const logInterval = setInterval(() => {
        if (logIndex < logs.length) {
            consoleLog.innerText = logs[logIndex];
            logIndex++;
        }
    }, 800);

    // –°–º–µ–Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
    setTimeout(() => {
        ddosText.innerText = "Access Granted.";
        ddosText.style.color = "#00FF00";
    }, 3800);

    // –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–∞–π—Ç–∞ —á–µ—Ä–µ–∑ 4.5 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        clearInterval(logInterval);
        ddosScreen.style.opacity = "0";
        setTimeout(() => {
            ddosScreen.style.display = "none";
            mainSite.classList.remove("hidden");
            // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                mainSite.style.opacity = "1";
                document.title = "Samurai SMP | Home";
            }, 100);
        }, 1000);
    }, 4500);
});

// --- –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ö–õ–ê–î–û–ö ---
function switchTab(tabName) {
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => tab.classList.add('hidden'));
    tabs.forEach(tab => tab.classList.remove('active-tab'));

    // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–Ω–æ–ø–æ–∫
    const buttons = document.querySelectorAll('.menu-items button');
    buttons.forEach(btn => btn.classList.remove('active-btn'));

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é
    document.getElementById('tab-' + tabName).classList.remove('hidden');
    document.getElementById('tab-' + tabName).classList.add('active-tab');
    
    // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
    document.getElementById('btn-' + tabName).classList.add('active-btn');
}
// --- –ß–ê–°–¢–¨ 2: –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ö–û–ü–ò–†–û–í–ê–ù–ò–ï ---

const SERVER_IP = "c12.play2go.cloud";
const SERVER_PORT = "20002"; // –ï—Å–ª–∏ –ø–æ—Ä—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç 25565, API —Ç—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞—Ç—å –µ–≥–æ

// 1. –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω–∞
function updateServerStatus() {
    const statusText = document.getElementById('server-status-text');
    const statusDot = document.getElementById('status-dot');
    const playerCount = document.getElementById('player-count');
    const maxPlayers = document.getElementById('max-players');

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API mcsrvstat.us
    fetch(`https://api.mcsrvstat.us/3/${SERVER_IP}:${SERVER_PORT}`)
        .then(response => response.json())
        .then(data => {
            if (data.online) {
                // –°–µ—Ä–≤–µ—Ä –≤–∫–ª—é—á–µ–Ω
                statusText.innerText = "–û–Ω–ª–∞–π–Ω";
                statusText.style.color = "#00AA00"; // –ó–µ–ª–µ–Ω—ã–π
                statusDot.innerText = "üü¢";
                
                playerCount.innerText = data.players.online;
                maxPlayers.innerText = data.players.max;
            } else {
                // –°–µ—Ä–≤–µ—Ä –≤—ã–∫–ª—é—á–µ–Ω
                statusText.innerText = "–û—Ñ—Ñ–ª–∞–π–Ω";
                statusText.style.color = "#FF5555"; // –ö—Ä–∞—Å–Ω—ã–π
                statusDot.innerText = "üî¥";
                playerCount.innerText = "0";
                maxPlayers.innerText = "0";
            }
        })
        .catch(error => {
            console.error("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:", error);
            statusText.innerText = "–û—à–∏–±–∫–∞";
        });
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener("DOMContentLoaded", () => {
    // –ñ–¥–µ–º 4 —Å–µ–∫—É–Ω–¥—ã (–ø–æ–∫–∞ –ø—Ä–æ–π–¥–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏), —á—Ç–æ–±—ã –Ω–µ –≥—Ä—É–∑–∏—Ç—å —Å—Ä–∞–∑—É
    setTimeout(updateServerStatus, 4000);
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
    setInterval(updateServerStatus, 30000);
});

// 2. –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è IP
function copyIp() {
    const ipText = "c12.play2go.cloud:20002";
    const tooltip = document.getElementById('copy-tooltip');

    navigator.clipboard.writeText(ipText).then(() => {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!"
        tooltip.style.opacity = "1";
        
        // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            tooltip.style.opacity = "0";
        }, 2000);
    }).catch(err => {
        console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å: ', err);
    });
}
